<html>
	<head>
		<link rel="stylesheet" type="text/css" href="ludas.css">
	</head>
	<body>
		<h1>LUDAS User Management</h1>
		<input type="text" name="User" id="User">
		<button onclick="SearchUsers()">Search</button>
		<br>
		(Format: FirstnameLastname)
		<br>
		<p id="Message"></p> 

		<br>
		<button onclick="AddUsers()">Add Admin</button>
		<button onclick="BanUsers()">Ban User</button>

		<script>

          	var xmlhttp = new XMLHttpRequest();
		var TheUsers;
		xmlhttp.onreadystatechange = function() {
    			if (this.readyState == 4 && this.status == 200) {
	        		TheUsers = JSON.parse(this.responseText);
    			}
		};
		xmlhttp.open("GET", "users.json", true);
		xmlhttp.send();
				
			function SearchUsers()
			{
				var searchedUser = document.getElementById("User").value;
				var Flag = "0";
				for(i in TheUsers.users){
					if(searchedUser == TheUsers.users[i].user_name){
						document.getElementById("Message").innerHTML = "Add " + TheUsers.users[i].user_name + " to the administrator list or ban user";
						Flag = "1";
					}
					if(Flag == "0"){
						document.getElementById("Message").innerHTML = "Search again, " + searchedUser + " not found";
					}	
				}
	        	}
			function AddUsers()
			{
				var searchedUser = document.getElementById("User").value;
				for(i in TheUsers.users){
					if(searchedUser == TheUsers.users[i].user_name){
						TheUsers.users[i].user_flag = "admin";
						document.getElementById("Message").innerHTML = TheUsers.users[i].user_name + " is a " +TheUsers.users[i].user_flag;
					}	
				}
			}
			function BanUsers()
			{
				var searchedUser = document.getElementById("User").value;
				for(i in TheUsers.users){
					if(searchedUser == TheUsers.users[i].user_name){
						TheUsers.users[i].user_flag = "banned";
						document.getElementById("Message").innerHTML = TheUsers.users[i].user_name + " is a " +TheUsers.users[i].user_flag +" user";
					}	
				}
			}
		</script>
	</body>
</html>
